<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.118.2"><link rel="shortcut icon" type=image/x-icon href=/img/favicon.ico><link rel=icon type=image/x-icon href=/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/img/avatar.jpg><link rel=icon type=image/png sizes=32x32 href=/img/avatar.jpg><link rel=apple-touch-icon sizes=180x180 href=/img/avatar.jpg><meta itemprop=name content="Docker 入门"><meta itemprop=description content="docker入门"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://www.roiwk.cn/img/avatar.jpg"><meta itemprop=keywords content="docker,primer"><meta property="og:type" content="article"><meta property="og:title" content="Docker 入门"><meta property="og:description" content="docker入门"><meta property="og:image" content="/img/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://www.roiwk.cn/post/docker-introduction/"><meta property="og:site_name" content="roiwk"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="roiwk"><meta property="article:published_time" content="2018-12-07 00:00:00 +0000 UTC"><meta property="article:modified_time" content="2018-12-07 00:00:00 +0000 UTC"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.b490bf3c0a5e80347df0df73974fe657f81aea5f0eb306459c34dd257df40080.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"docker-introduction","permalink":"https://www.roiwk.cn/post/docker-introduction/","title":"Docker 入门"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?e81c4027dd454fce2c17467758558b66",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://www.googletagmanager.com/gtag/js?id=G-P9LHB61C3W",e.async="true",e.onload=function(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-P9LHB61C3W ")},document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Docker 入门 - roiwk</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>roiwk</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>(^_^)</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-archives"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-list hvr-icon"></i>文章
<span class=badge>8</span></a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#一-是什么>一. 是什么</a><ul><li><a href=#1docker概念与简要历史>1.Docker概念与简要历史</a></li><li><a href=#2与传统虚拟方式的不同>2.与传统虚拟方式的不同</a></li></ul></li><li><a href=#二-为什么>二. 为什么</a><ul><li><a href=#1使用docker的原因>1.使用Docker的原因</a></li><li><a href=#2用途>2.用途</a></li></ul></li><li><a href=#三-怎么做>三. 怎么做</a><ul><li><a href=#1基本概念>1.基本概念</a></li><li><a href=#2快速入门>2.快速入门</a><ul><li><a href=#安装下载>安装下载</a></li><li><a href=#实战nginx容器搭建>实战nginx容器搭建</a></li></ul></li><li><a href=#3深入与提高>3.深入与提高</a><ul><li><a href=#1-dockerfile文件>1> Dockerfile文件</a></li><li><a href=#2-yml文件>2> yml文件</a></li><li><a href=#3-docker三剑客>3> Docker三剑客</a><ul><li><a href=#docker-compose>Docker Compose</a></li><li><a href=#docker-machine>Docker Machine</a></li><li><a href=#docker-swarm>Docker Swarm</a></li></ul></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=roiwk src=/imgs/img-lazy-loading.gif data-src=/img/avatar.jpg><p class=site-author-name itemprop=name>roiwk</p><div class=site-description itemprop=description>欢迎来到roiwk个人站，本人主要专注于程序开发，互联网解决方案。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>8</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>6</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>14</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/roiwk title="Github → https://github.com/roiwk" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span>
<span class=links-of-social-item><a href=mailto:vip@roiwk.cn title="E-Mail → mailto:vip@roiwk.cn" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>E-Mail</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.ruanyifeng.com/blog/ title=https://www.ruanyifeng.com/blog/ target=_blank>阮一峰</a></li><li class=links-of-blogroll-item><a href=https://www.liaoxuefeng.com/ title=https://www.liaoxuefeng.com/ target=_blank>廖雪峰</a></li><li class=links-of-blogroll-item><a href=https://coolshell.cn/ title=https://coolshell.cn/ target=_blank>陈皓</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=2018-12-07T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=6690></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=17></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2023-09-04T00:00:00+00:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/roiwk rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://www.roiwk.cn/post/docker-introduction/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/img/avatar.jpg"><meta itemprop=name content="roiwk"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="roiwk"><meta itemprop=description content="欢迎来到roiwk个人站，本人主要专注于程序开发，互联网解决方案。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Docker 入门"><meta itemprop=description content="docker入门"></span><header class=post-header><h1 class=post-title itemprop="name headline">Docker 入门</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>发表于：</span>
<time title="发表于：2018-12-07 00:00:00 +0000 UTC" itemprop="dateCreated datePublished" datetime="2018-12-07 00:00:00 +0000 UTC">2018-12-07</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/docker itemprop=url rel=index><span itemprop=name>docker</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span><span>3008</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>7分钟</span></span>
<span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>浏览：</span>
<span id=busuanzi_value_page_pv data-path=/post/docker-introduction/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><p><a href=https://gitee.com/roiwk/docker_sharing><img src="https://img.shields.io/badge/roiwk-docker_sharing-C71D23?logo=gitee" alt=gitee title=roiwk/docker_sharing></a></p><h1 id=docker-入门>Docker 入门</h1><p><img src=/imgs/img-lazy-loading.gif data-src=/images/docker.jpg alt=Docker></p><hr><h1 id=docker>Docker</h1><h2 id=一-是什么>一. 是什么</h2><h3 id=1docker概念与简要历史>1.Docker概念与简要历史</h3><blockquote><p>Docker 是一个开源的应用容器引擎，你可以将其理解为一个轻量级的虚拟机，
开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上。</p></blockquote><blockquote><p>Docker 最初是 dotCloud 公司创始人 Solomon Hykes 在法国期间发起的一个公司内部项目，它是基于 dotCloud 公司多年云服务技术的一次革新，
并于 2013 年 3 月以 Apache 2.0 授权协议开源，主要项目代码在 GitHub 上进行维护。Docker 项目后来还加入了 Linux 基金会，并成立推动 开放容器联盟（OCI）。</p></blockquote><blockquote><p>Docker 自开源后受到广泛的关注和讨论，至今其 GitHub 项目已经超过 4 万 6 千个星标和一万多个 fork。
甚至由于 Docker 项目的火爆，在 2013 年底，dotCloud 公司决定改名为Docker。
Docker 最初是在 Ubuntu 12.04 上开发实现的；Red Hat 则从 RHEL 6.5 开始对Docker 进行支持；Google 也在其 PaaS 产品中广泛应用 Docker。</p></blockquote><blockquote><p>Docker 使用 Google 公司推出的 Go 语言 进行开发实现，
基于 Linux 内核的cgroup，namespace，以及 AUFS 类的 Union FS 等技术，对进程进行封装隔离，属于 操作系统层面的虚拟化技术。
<code>由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。</code>
最初实现是基于 LXC，从 0.7 版本以后开始去除 LXC，转而使用自行开发的libcontainer，从 1.11 开始，则进一步演进为使用 runC 和 containerd。</p></blockquote><blockquote><p>Docker 在容器的基础上，进行了进一步的封装，从文件系统、网络互联到进程隔离等等，极大的简化了容器的创建和维护。
使得 Docker 技术比虚拟机技术更为轻便、快捷。</p></blockquote><h3 id=2与传统虚拟方式的不同>2.与传统虚拟方式的不同</h3><blockquote><p>传统虚拟机技术是虚拟出一套硬件后，在其上<code>运行一个完整操作系统，在该系统上再运行所需应用进程</code>；
而容器内的应用进程直接<code>运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。</code>因此容器要比传统虚拟机更为轻便。</p></blockquote><p><img src=/imgs/img-lazy-loading.gif data-src=/images/docker-virtualization.png alt=传统虚拟化 title=每个虚拟化应用程序不仅包括应用程序[可能只有10几MB]和必要的二进制文件和库，而且还包括整个客户操作系统[可能有10几GB].></p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/docker-level.png alt=Docker title=Docker引擎容器只包含应用程序及其依赖项。它在主机操作系统的用户空间中作为一个独立的进程运行，与其他容器共享内核。因此，它具有vm的资源隔离和分配优点，但可移植性和效率更高。></p><hr><h2 id=二-为什么>二. 为什么</h2><h3 id=1使用docker的原因>1.使用Docker的原因</h3><blockquote><p>作为一种新兴的虚拟化方式，Docker 跟传统的虚拟化方式相比具有众多的优势。</p></blockquote><p>1> <strong>更高效的利用系统资源</strong></p><blockquote><p>由于容器不需要进行硬件虚拟以及运行完整操作系统等额外开销，Docker 对系统资源的利用率更高。
无论是应用执行速度、内存损耗或者文件存储速度，都要比传统虚拟机技术更高效。
因此，相比虚拟机技术，一个相同配置的主机，往往可以运行更多数量的应用。</p></blockquote><p>2> <strong>更快速的启动时间</strong></p><blockquote><p>传统的虚拟机技术启动应用服务往往需要数分钟，而 Docker 容器应用，由于直接运行于宿主内核，无需启动完整的操作系统，因此可以做到秒级、甚至毫秒级的启动时间。
大大的节约了开发、测试、部署的时间。</p></blockquote><p>3> <strong>一致的运行环境</strong></p><blockquote><p>开发过程中一个常见的问题是环境一致性问题。由于开发环境、测试环境、生产环境不一致，导致有些 bug 并未在开发过程中被发现。
而 Docker 的镜像提供了除内核外完整的运行时环境，确保了应用运行环境一致性，从而不会再出现 「这段代码在我机器上没问题啊」 这类问题。</p></blockquote><p>4> <strong>持续交付和部署</strong></p><blockquote><p>对开发和运维（DevOps）人员来说，最希望的就是一次创建或配置，可以在任意地方正常运行。
使用 Docker 可以通过定制应用镜像来实现持续集成、持续交付、部署。
开发人员可以通过 Dockerfile 来进行镜像构建，并结合持续集成(Continuous Integration) 系统进行集成测试，
而运维人员则可以直接在生产环境中快速部署该镜像，甚至结合 持续部署(Continuous Delivery/Deployment) 系统进行自动部署。
而且使用 Dockerfile 使镜像构建透明化，不仅仅开发团队可以理解应用运行环境，也方便运维团队理解应用运行所需条件，帮助更好的生产环境中部署该镜像。</p></blockquote><p>5> <strong>更轻松的迁移</strong></p><blockquote><p>由于 Docker 确保了执行环境的一致性，使得应用的迁移更加容易。
Docker 可以在很多平台上运行，无论是物理机、虚拟机、公有云、私有云，甚至是笔记本，其运行结果是一致的。
因此用户可以很轻易的将在一个平台上运行的应用，迁移到另一个平台上，而不用担心运行环境的变化导致应用无法正常运行的情况。</p></blockquote><p>6> <strong>更轻松的维护和扩展</strong></p><blockquote><p>Docker 使用的分层存储以及镜像的技术，使得应用重复部分的复用更为容易，也使得应用的维护更新更加简单，基于基础镜像进一步扩展镜像也变得非常简单。
此外，Docker 团队同各个开源项目团队一起维护了一大批高质量的 官方镜像，既可以直接在生产环境使用，又可以作为基础进一步定制，大大的降低了应用服务的镜像制作成本。</p></blockquote><p>7> <strong>对比传统虚拟机总结</strong></p><table><thead><tr><th>特性</th><th>容器</th><th>虚拟机</th></tr></thead><tbody><tr><td>启动</td><td>秒级</td><td>分钟级</td></tr><tr><td>硬件使用</td><td>一般为MB</td><td>一般为GB</td></tr><tr><td>性能</td><td>接近原生</td><td>弱于</td></tr><tr><td>系统支持量</td><td>单机支持上千个容器</td><td>一般几十个</td></tr></tbody></table><h3 id=2用途>2.用途</h3><p>1> <strong>提供一次性的环境。</strong></p><blockquote><p>比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。</p></blockquote><p>2> <strong>提供弹性的云服务。</strong></p><blockquote><p>因为 Docker 容器可以随开随关，很适合动态扩容和缩容。</p></blockquote><p>3> <strong>组建微服务架构。</strong></p><blockquote><p>通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。</p></blockquote><hr><h2 id=三-怎么做>三. 怎么做</h2><h3 id=1基本概念>1.基本概念</h3><p>1> <strong>镜像</strong></p><ul><li><em>镜像就是一个只读的模板。</em></li></ul><blockquote><p>例如：一个镜像可以包含一个完整的 ubuntu 操作系统环境，里面仅安装了 Apache 或用户需要的其它应用程序。</p></blockquote><ul><li>镜像可以用来创建 Docker 容器。</li></ul><blockquote><p>Docker 提供了一个很简单的机制来创建镜像或者更新现有的镜像，用户甚至可以直接从其他人那里下载一个已经做好的镜像来直接使用。</p></blockquote><p>2> <strong>容器</strong></p><ul><li><em>Docker 利用容器来运行应用。</em></li></ul><blockquote><p>容器是从镜像创建的运行实例。它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证安全的平台。
可以把容器看做是一个简易版的 Linux 环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。</p></blockquote><p>3> <strong>仓库</strong></p><ul><li><em>仓库是集中存放镜像文件的场所。</em></li></ul><blockquote><p>有时候会把仓库和仓库注册服务器（Registry）混为一谈，并不严格区分。实际上，仓库注册服务器上往往存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像有不同的标签（tag）。</p></blockquote><ul><li>仓库分为公开仓库（Public）和私有仓库（Private）两种形式。</li><li>最大的公开仓库是
<a href=https://hub.docker.com/ title="Docker Hub" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Docker Hub
<i class="fa fa-external-link-alt"></i>
</a>，存放了数量庞大的镜像供用户下载。</li></ul><h3 id=2快速入门>2.快速入门</h3><h4 id=安装下载>安装下载</h4><p><a href=https://www.docker.com/get-started title="win10/mac 下载" rel="noopener external nofollow noreferrer" target=_blank class=exturl>win10/mac 下载
<i class="fa fa-external-link-alt"></i></a>
<a href=https://docs.docker.com/toolbox/toolbox_install_windows/ title="win10以下版本下载 docker-tool" rel="noopener external nofollow noreferrer" target=_blank class=exturl>win10以下版本下载 docker-tool
<i class="fa fa-external-link-alt"></i></a></p><h4 id=实战nginx容器搭建>实战nginx容器搭建</h4><p><em>要求：配置和站点文件不放进容器（方便管理）</em>
<a href=https://hub.docker.com/ title=官方仓库 rel="noopener external nofollow noreferrer" target=_blank class=exturl>官方仓库
<i class="fa fa-external-link-alt"></i></a></p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/docker-flow.png alt=Docker></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>sart=&gt;start: 开始:&gt;https://hub.docker.com/_/nginx/[blank]
</span></span><span style=display:flex><span>end=&gt;end: 结束:&gt;https://hub.docker.com/_/nginx/[blank]
</span></span><span style=display:flex><span>io_input=&gt;inputoutput: 搭建后销毁nginx
</span></span><span style=display:flex><span>op_pull=&gt;operation: 拉取镜像(docker pull)
</span></span><span style=display:flex><span>op_run=&gt;operation: 运行容器(docker run)
</span></span><span style=display:flex><span>op_stop=&gt;operation: 停止容器(docker stop)
</span></span><span style=display:flex><span>op_destory=&gt;operation: 销毁容器(docker rm)
</span></span><span style=display:flex><span>op_rm=&gt;operation: 删除镜像(docker rmi)
</span></span><span style=display:flex><span>io_service=&gt;inputoutput: 完成-搭建后销毁
</span></span><span style=display:flex><span>sub_params=&gt;subroutine: 进入容器(docker exec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>op_stop=&gt;operation: 容器关闭状态
</span></span><span style=display:flex><span>cond_stop=&gt;condition: 是否关闭容器?
</span></span><span style=display:flex><span>sub_stop=&gt;subroutine: 关闭容器(docker stop)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sart-&gt;io_input-&gt;op_pull-&gt;op_run-&gt;sub_params-&gt;op_destory-&gt;op_rm-&gt;io_service
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cond_stop(yes)-&gt;sub_stop-&gt;op_stop
</span></span><span style=display:flex><span>cond_stop(no)-&gt;io_service-&gt;end
</span></span></code></pre></div><ul><li>创建需要挂载的文件夹目录结构</li></ul><table><thead><tr><th style=text-align:left>文件、目录名</th><th style=text-align:left>说明</th></tr></thead><tbody><tr><td style=text-align:left>-docker</td><td style=text-align:left>将挂载到容器中</td></tr><tr><td style=text-align:left>&mdash;nginx</td><td style=text-align:left>nginx容器相关文件目录</td></tr><tr><td style=text-align:left>&mdash;&ndash;conf</td><td style=text-align:left>配置目录</td></tr><tr><td style=text-align:left>&mdash;&mdash;-nginx.conf</td><td style=text-align:left>配置文件</td></tr><tr><td style=text-align:left>&mdash;&ndash;www</td><td style=text-align:left>nginx站点目录</td></tr><tr><td style=text-align:left>&mdash;&mdash;-index.html</td><td style=text-align:left>主页文件</td></tr></tbody></table><ul><li>拉取镜像</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>docker pull nginx:1.15.7
</span></span></code></pre></div><ul><li>运行容器</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>docker run --name nginx1 -v /c/User/share/docker/nginx/www:/usr/share/nginx/html:rw -v /c/User/share/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf:ro -p 8000:80 -d nginx:1.15.7
</span></span></code></pre></div><blockquote><p>注：挂载目录尽量使用绝对路径</p></blockquote><ul><li>进入容器</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>docker exec -it nginx1 bash
</span></span></code></pre></div><ul><li>停止容器</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>docker stop nginx1
</span></span></code></pre></div><ul><li>销毁容器</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>docker rm nginx1
</span></span></code></pre></div><ul><li>销毁镜像</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>docker rmi nginx:1.15.7
</span></span></code></pre></div><h3 id=3深入与提高>3.深入与提高</h3><h4 id=1-dockerfile文件>1> Dockerfile文件</h4><blockquote><p>Dockerfile 是一个文本文件，其内包含了一条条的指令(Instruction)，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。</p></blockquote><h4 id=2-yml文件>2> yml文件</h4><blockquote><p>下面三剑客中docker-compose的编排文件。用于快速配置和管理一组服务容器（项目）。</p></blockquote><h4 id=3-docker三剑客>3> Docker三剑客</h4><h5 id=docker-compose>Docker Compose</h5><blockquote><p>负责快速的部署分布式应用。
Compose 定位是 「定义和运行多个 Docker 容器的应用（Defining and running multi-container Docker applications）」</p></blockquote><h5 id=docker-machine>Docker Machine</h5><blockquote><p>Docker Machine 是 Docker 官方编排（Orchestration）项目
负责在多种平台上快速安装 Docker 环境。</p></blockquote><p><img src=/imgs/img-lazy-loading.gif data-src=/images/docker-machine.png alt=docker-machine></p><h5 id=docker-swarm>Docker Swarm</h5><blockquote><p>提供 Docker 容器集群服务，是 Docker 官方对容器云生态进行支持的核心方案。</p></blockquote><p><img src=/imgs/img-lazy-loading.gif data-src=/images/docker-swarm.png alt=管理节点与工作节点的关系></p><hr></div><footer class=post-footer><div class=post-tags><a href=/tags/docker>docker</a>
<a href=/tags/primer>primer</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/img/ali-pay.png alt="roiwk - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/img/wechat-pay.png alt="roiwk - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章标题：</strong>
Docker 入门</li><li class=post-copyright-author><strong>原文作者：</strong>
roiwk</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://www.roiwk.cn/post/docker-introduction/ title="Docker 入门">https://www.roiwk.cn/post/docker-introduction/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://twitter.com/roiwk_><span class=icon><i class="fab fa-twitter"></i></span>
<span class=label>Twitter</span></a></div><div class=social-item><a target=_blank class=social-link href=/img/qq_qrcode.png><span class=icon><i class="fab fa-weixin"></i></span>
<span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i></span>
<span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/umeng-openapi/ rel=next title=友盟openAPI的php实现><i class="fa fa-chevron-left"></i> 友盟openAPI的php实现</a></div><div class="post-nav-prev post-nav-item"></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2022 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>roiwk</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.118.2 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.4.1 target=_blank>Hugo NexT.Pisces</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"addthis":{"cfg":{"pubid":"ra-629f474b8e7451cc"},"js":"https://s7.addthis.com/js/300/addthis_widget.js"},"bookmark":{"color":"#222","enable":true,"save":"auto"},"busuanzi":{"pageview":true},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Q\u0026A","categoryid":"DIC_kwDOJMYno84CVBqV","emit":false,"inputposition":"top","mapping":"title","reactions":true,"repo":"roiwk/blog-giscus","repoid":"R_kgDOJMYnow","theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://www.roiwk.cn","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Pisces","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.4.1","waline":{"cfg":{"comment":false,"emoji":false,"imguploader":false,"pageview":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.644ae905731a2317e6d10ee7ac3e719fd8f237b55ef1520aec49bb118a465157.js defer></script></body></html>